{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": "2020 votes cast as a share of voting-eligible population (VEP)",
  "width": 800,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/shanteru/fit3179-visualisation2/main/US_States_SOVI_Infographics.json",
    "format": {
          "type": "topojson",
          "feature": "US_States_SOVI_Infographics"
        }
  },
  "transform": [{
      "lookup": "State",
      "from": {
        "data": {
          "values": [
            {"State": "Alabama", "VEP": 63.1},
            {"State": "Alaska", "VEP": 68.4},
            {"State": "Arizona", "VEP": 65.3},
            {"State": "Arkansas", "VEP": 55.9},
            {"State": "California", "VEP": 67.4}
          ]
        },
        "key": "State",
        "fields": ["VEP"]
      }
    },
    {"calculate": "datum.VEP/100 * 100", "as": "VEP Turnout Rate"}
  ],
  "projection": {
    "type": "albersUsa"
  },
  "mark": {
    "type": "geoshape"
    },
  "encoding": {
    "color": {
      "field": "VEP Turnout Rate",
      "type": "quantitative",
      "scale": {"type": "threshold","domain": [50,60,70,80,90,100]}
      
    },
    "tooltip": [
      {"field": "properties.NAME", "type": "nominal", "title": "State"},
      {"field": "VEP Turnout Rate", "type": "quantitative" ,"format": ".2f"}
    ]
  }

}
